<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Termine - Vetmates</title>
    
    <!-- CSS Files -->
    <link rel="stylesheet" href="../styles/reset.css">
    <link rel="stylesheet" href="../styles/variables.css">
    <link rel="stylesheet" href="../styles/theme.css">
    <link rel="stylesheet" href="../styles/typography.css">
    <link rel="stylesheet" href="../styles/layout.css">
    <link rel="stylesheet" href="../styles/utilities.css">
    
    <!-- Component Styles -->
    <link rel="stylesheet" href="../styles/components/navbar.css">
    <link rel="stylesheet" href="../styles/components/sidebar.css">
    <link rel="stylesheet" href="../styles/components/forms.css">
    <link rel="stylesheet" href="../styles/components/buttons.css">
    <link rel="stylesheet" href="../styles/components/cards.css">
    <link rel="stylesheet" href="../styles/components/tables.css">
    <link rel="stylesheet" href="../styles/components/alerts.css">
    
    <!-- Page Styles -->
    <link rel="stylesheet" href="../styles/pages/termine.css">
</head>
<body>
    <!-- Navbar -->
    <div id="navbar-container"></div>
    
    <!-- Sidebar -->
    <div id="sidebar-container"></div>
    
    <!-- Main Content -->
    <main class="main-content">
        <div class="termine-container">
            <!-- Page Header -->
            <div class="page-header">
                <h1 class="page-title">Termine</h1>
                <p class="page-description">Verwalten Sie Ihre Termine und Behandlungen</p>
            </div>
            
            <!-- Action Buttons -->
            <div class="action-bar">
                <button class="btn btn-primary btn-cta" id="addTerminBtn">
                    <span class="btn-icon">+</span>
                    Neuer Termin
                </button>
                <div class="view-controls">
                    <button class="btn btn-secondary btn-sm" id="calendarViewBtn" data-view="calendar">
                        <span class="btn-icon">üìÖ</span>
                        Kalender
                    </button>
                    <button class="btn btn-secondary btn-sm active" id="listViewBtn" data-view="list">
                        <span class="btn-icon">üìã</span>
                        Liste
                    </button>
                </div>
                <div class="search-container">
                    <input type="text" class="search-input" id="terminSearch" placeholder="Termine suchen...">
                    <span class="search-icon">üîç</span>
                </div>
            </div>
            
            <!-- Date Filter -->
            <div class="date-filter">
                <div class="date-controls">
                    <button class="btn btn-ghost btn-sm" id="prevDateBtn">
                        <span class="btn-icon">‚Üê</span>
                    </button>
                    <div class="current-date" id="currentDate">Heute</div>
                    <button class="btn btn-ghost btn-sm" id="nextDateBtn">
                        <span class="btn-icon">‚Üí</span>
                    </button>
                </div>
                <div class="date-presets">
                    <button class="btn btn-ghost btn-sm" data-preset="today">Heute</button>
                    <button class="btn btn-ghost btn-sm" data-preset="tomorrow">Morgen</button>
                    <button class="btn btn-ghost btn-sm" data-preset="week">Diese Woche</button>
                    <button class="btn btn-ghost btn-sm" data-preset="month">Dieser Monat</button>
                </div>
            </div>
            
            <!-- Termin Form Modal -->
            <div class="modal" id="terminModal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h2 class="modal-title">Neuen Termin hinzuf√ºgen</h2>
                        <button class="btn btn-ghost btn-icon btn-sm" id="closeModal" aria-label="Schlie√üen">&times;</button>
                    </div>
                    
                    <form class="termin-form" id="terminForm">
                        <div class="form-grid">
                            <!-- Appointment Information -->
                            <div class="form-section">
                                <h3 class="section-title">Termininformationen</h3>
                                
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="terminDate">Datum *</label>
                                        <input type="date" id="terminDate" name="terminDate" required>
                                    </div>
                                    <div class="form-group">
                                        <label for="terminTime">Uhrzeit *</label>
                                        <input type="time" id="terminTime" name="terminTime" required>
                                    </div>
                                </div>
                                
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="terminDuration">Dauer (Minuten) *</label>
                                        <select id="terminDuration" name="terminDuration" required>
                                            <option value="">Dauer ausw√§hlen</option>
                                            <option value="15">15 Minuten</option>
                                            <option value="30">30 Minuten</option>
                                            <option value="45">45 Minuten</option>
                                            <option value="60">1 Stunde</option>
                                            <option value="90">1,5 Stunden</option>
                                            <option value="120">2 Stunden</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label for="terminType">Termintyp *</label>
                                        <select id="terminType" name="terminType" required>
                                            <option value="">Typ ausw√§hlen</option>
                                            <option value="konsultation">Konsultation</option>
                                            <option value="impfung">Impfung</option>
                                            <option value="operation">Operation</option>
                                            <option value="untersuchung">Untersuchung</option>
                                            <option value="behandlung">Behandlung</option>
                                            <option value="nachsorge">Nachsorge</option>
                                            <option value="notfall">Notfall</option>
                                            <option value="sonstiges">Sonstiges</option>
                                        </select>
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    <label for="terminStatus">Status</label>
                                    <select id="terminStatus" name="terminStatus">
                                        <option value="geplant">Geplant</option>
                                        <option value="best√§tigt">Best√§tigt</option>
                                        <option value="in_bearbeitung">In Bearbeitung</option>
                                        <option value="abgeschlossen">Abgeschlossen</option>
                                        <option value="abgesagt">Abgesagt</option>
                                        <option value="verschoben">Verschoben</option>
                                    </select>
                                </div>
                                
                                <div class="form-group">
                                    <label for="terminNotes">Notizen</label>
                                    <textarea id="terminNotes" name="terminNotes" rows="3" placeholder="Zus√§tzliche Notizen zum Termin..."></textarea>
                                </div>
                            </div>
                            
                            <!-- Patient Information -->
                            <div class="form-section">
                                <h3 class="section-title">Patient & Besitzer</h3>
                                
                                <div class="form-group">
                                    <label for="patientSelect">Patient *</label>
                                    <select id="patientSelect" name="patientId" required>
                                        <option value="">Patient ausw√§hlen</option>
                                        <!-- Will be populated by JavaScript -->
                                    </select>
                                </div>
                                
                                <div class="form-group">
                                    <label for="ownerName">Besitzer</label>
                                    <input type="text" id="ownerName" name="ownerName" readonly>
                                </div>
                                
                                <div class="form-group">
                                    <label for="ownerPhone">Telefon</label>
                                    <input type="tel" id="ownerPhone" name="ownerPhone" readonly>
                                </div>
                                
                                <div class="form-group">
                                    <label for="ownerEmail">E-Mail</label>
                                    <input type="email" id="ownerEmail" name="ownerEmail" readonly>
                                </div>
                            </div>
                            
                            <!-- Staff Information -->
                            <div class="form-section">
                                <h3 class="section-title">Personal & Ressourcen</h3>
                                
                                <div class="form-group">
                                    <label for="assignedStaff">Zugewiesenes Personal</label>
                                    <select id="assignedStaff" name="assignedStaff">
                                        <option value="">Personal ausw√§hlen</option>
                                        <option value="dr_schmidt">Dr. Schmidt</option>
                                        <option value="dr_mueller">Dr. M√ºller</option>
                                        <option value="dr_weber">Dr. Weber</option>
                                        <option value="pfleger_schulz">Pfleger Schulz</option>
                                        <option value="pfleger_klein">Pfleger Klein</option>
                                    </select>
                                </div>
                                
                                <div class="form-group">
                                    <label for="treatmentRoom">Behandlungsraum</label>
                                    <select id="treatmentRoom" name="treatmentRoom">
                                        <option value="">Raum ausw√§hlen</option>
                                        <option value="raum_1">Behandlungsraum 1</option>
                                        <option value="raum_2">Behandlungsraum 2</option>
                                        <option value="raum_3">Behandlungsraum 3</option>
                                        <option value="operationssaal">Operationssaal</option>
                                        <option value="r√∂ntgenraum">R√∂ntgenraum</option>
                                    </select>
                                </div>
                                
                                <div class="form-group">
                                    <label for="equipment">Ben√∂tigte Ausr√ºstung</label>
                                    <textarea id="equipment" name="equipment" rows="2" placeholder="Spezielle Ausr√ºstung..."></textarea>
                                </div>
                                
                                <div class="form-group">
                                    <label for="reminderSettings">Erinnerungen</label>
                                    <div class="checkbox-group">
                                        <label class="checkbox-label">
                                            <input type="checkbox" name="sendReminder" value="true">
                                            <span class="checkmark"></span>
                                            SMS-Erinnerung senden
                                        </label>
                                        <label class="checkbox-label">
                                            <input type="checkbox" name="sendEmail" value="true">
                                            <span class="checkmark"></span>
                                            E-Mail-Erinnerung senden
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-actions">
                            <button type="button" class="btn btn-secondary" id="cancelBtn">Abbrechen</button>
                            <button type="submit" class="btn btn-primary btn-cta">Termin speichern</button>
                        </div>
                    </form>
                </div>
            </div>
            
            <!-- Calendar View -->
            <div class="calendar-view" id="calendarView" style="display: none;">
                <div class="calendar-header">
                    <h2 class="calendar-title">Terminkalender</h2>
                    <div class="calendar-controls">
                        <button class="btn btn-ghost btn-sm" id="prevMonthBtn">‚Üê</button>
                        <span class="current-month" id="currentMonth">Dezember 2024</span>
                        <button class="btn btn-ghost btn-sm" id="nextMonthBtn">‚Üí</button>
                    </div>
                </div>
                
                <div class="calendar-grid" id="calendarGrid">
                    <!-- Calendar will be generated by JavaScript -->
                </div>
            </div>
            
            <!-- List View -->
            <div class="list-view" id="listView">
                <div class="termine-section">
                    <div class="section-header">
                        <h2 class="section-title">Terminliste</h2>
                        <div class="list-controls">
                            <select class="filter-select" id="statusFilter">
                                <option value="">Alle Status</option>
                                <option value="geplant">Geplant</option>
                                <option value="best√§tigt">Best√§tigt</option>
                                <option value="in_bearbeitung">In Bearbeitung</option>
                                <option value="abgeschlossen">Abgeschlossen</option>
                                <option value="abgesagt">Abgesagt</option>
                                <option value="verschoben">Verschoben</option>
                            </select>
                            <select class="filter-select" id="typeFilter">
                                <option value="">Alle Typen</option>
                                <option value="konsultation">Konsultation</option>
                                <option value="impfung">Impfung</option>
                                <option value="operation">Operation</option>
                                <option value="untersuchung">Untersuchung</option>
                                <option value="behandlung">Behandlung</option>
                                <option value="nachsorge">Nachsorge</option>
                                <option value="notfall">Notfall</option>
                                <option value="sonstiges">Sonstiges</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="termine-table-container">
                        <table class="termine-table" id="termineTable">
                            <thead>
                                <tr>
                                    <th>Datum & Zeit</th>
                                    <th>Patient</th>
                                    <th>Typ</th>
                                    <th>Status</th>
                                    <th>Personal</th>
                                    <th>Dauer</th>
                                    <th>Aktionen</th>
                                </tr>
                            </thead>
                            <tbody id="termineTableBody">
                                <!-- Sample data will be populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                    
                    <div class="no-termine" id="noTermine" style="display: none;">
                        <div class="empty-state">
                            <div class="empty-icon">üìÖ</div>
                            <h3>Keine Termine gefunden</h3>
                            <p>F√ºgen Sie Ihren ersten Termin hinzu, um zu beginnen.</p>
                            <button class="btn btn-primary btn-cta" id="addFirstTerminBtn">Ersten Termin hinzuf√ºgen</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
    
    <!-- Alert Container -->
    <div id="alertContainer" class="alert-container"></div>
    
    <!-- Load Navbar HTML -->
    <script>
        // Load navbar HTML
        fetch('../components/navbar/navbar.html')
            .then(response => response.text())
            .then(html => {
                // Fix the Vetmates link for the current page location
                const fixedHtml = html.replace(/href="#" class="brand-link"/g, 'href="../../index.html" class="brand-link"');
                
                document.getElementById('navbar-container').innerHTML = fixedHtml;
                
                // Initialize navbar after HTML is loaded
                if (window.Navbar) {
                    window.navbar = new window.Navbar();
                } else {
                    // Load navbar JavaScript
                    const script = document.createElement('script');
                    script.src = '../components/navbar/navbar.js';
                    script.onload = () => {
                        if (window.Navbar) {
                            window.navbar = new window.Navbar();
                        }
                    };
                    document.head.appendChild(script);
                }
            })
            .catch(error => {
                console.error('Error loading navbar:', error);
            });
    </script>
    
    <!-- Load Sidebar HTML -->
    <script>
        // Load sidebar HTML
        fetch('../components/sidebar/sidebar.html')
            .then(response => response.text())
            .then(html => {
                // Fix navigation links for the current page location
                const fixedHtml = html
                    .replace(/href="index.html"/g, 'href="../../index.html"')
                    .replace(/href="app\/patienten\/patienten.html"/g, 'href="patienten.html"')
                    .replace(/href="app\/termine\/termine.html"/g, 'href="termine.html"')
                    .replace(/href="app\/mitarbeiter\/mitarbeiter.html"/g, 'href="../mitarbeiter/mitarbeiter.html"')
                    .replace(/href="app\/finanzen\/finanzen.html"/g, 'href="../finanzen/finanzen.html"')
                    .replace(/href="app\/einstellungen\/einstellungen.html"/g, 'href="../einstellungen/einstellungen.html"');
                
                document.getElementById('sidebar-container').innerHTML = fixedHtml;
                
                // Set active nav item
                const termineLink = document.querySelector('[data-page="termine"]');
                if (termineLink) {
                    termineLink.classList.add('active');
                }
                
                // Initialize sidebar after HTML is loaded
                if (window.Sidebar) {
                    window.sidebar = new window.Sidebar();
                } else {
                    // Load sidebar JavaScript
                    const script = document.createElement('script');
                    script.src = '../components/sidebar/sidebar.js';
                    script.onload = () => {
                        if (window.Sidebar) {
                            window.sidebar = new window.Sidebar();
                        }
                    };
                    document.head.appendChild(script);
                }
            })
            .catch(error => {
                console.error('Error loading sidebar:', error);
            });
    </script>
    
    <!-- Load Page JavaScript -->
    <script src="termine.js"></script>
</body>
</html>
